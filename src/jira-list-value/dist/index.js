"use strict";function sum(a,b,c){return a.slice(b,c).reduce(function(c,a){return c+a},0)}function getTimeFieldValue(b){return b.fields.resolutiondate}function getTimeField(b){return new Date(getTimeFieldValue(b)).getTime()}function formatFirstDay(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return"".concat(a.getYear()+1900,"-").concat(a.getMonth()+b,"-1")}var PRICE_FIELD="customfield_11241";function getResolvedByDate(){var a,b=prompt("Enter min date. (resolved >= minDate)",formatFirstDay(new Date)),c=prompt("Enter max date. (resolved < maxDate)",formatFirstDay(new Date(b),2)),d="/rest/api/2/search?filter=-4&jql=assignee in (currentUser()) AND status %3D Resolved AND "+"resolved >= \"".concat(b,"\" AND resolved < \"").concat(c,"\" order by resolutiondate DESC");console.log(d);var e=parseFloat(null!==(a=prompt("Enter a multiplier for currency conversion. (Use this if accounting and invoicing is done in different currencies. Provide how much invoicing currency you get for one accounting currency, e.g. how much HUF for 1 EUR. Leave it as 1 if you don' need currency conversion.)",1))&&void 0!==a?a:1);fetch(d).then(function(a){return a.json()}).then(function(a){var b=a.issues.filter(function(a){return a.fields[PRICE_FIELD]}).sort(function(c,a){return c.key>a.key?1:-1}),c=b.map(function(a){return"".concat(a.key,": ").concat(a.fields.summary," (").concat(a.fields[PRICE_FIELD],")")}),d=sum(a.issues.map(function(a){return a.fields[PRICE_FIELD]})),f=d.toString();// Keys are unique no equation handling.
if(!isNaN(e)&&1!=e){var l=Math.round(d*e);f="".concat(f," (invoice: ").concat(l,")");var m=b.map(function(a){return Math.floor(a.fields[PRICE_FIELD]*e)});c=c.map(function(a,b){var d=b<c.length-1?m[b]:l-sum(m,0,-1);return"".concat(a," (invoice: ").concat(d,")")})}var g=getTimeFieldValue(b[0]),h=getTimeFieldValue(b[b.length-1]),i=[c.join("\n"),"Total: ".concat(f),"Date Range: ".concat(g," - ").concat(h)].join("\n\n\n"),j=document.createElement("pre");document.body.appendChild(j),j.innerHTML=i,j.style.display="block",j.style.position="fixed",j.style.width="100vw",j.style.height="100vh",j.style.top=0,j.style.left=0,j.style.zIndex=99999,j.style.background="white";var k=document.createElement("button");k.innerHTML="Close",k.style.display="block",k.onclick=function(){return j.parentElement.removeChild(j)},j.appendChild(k)})}getResolvedByDate();